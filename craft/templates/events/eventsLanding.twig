{% extends "_layouts/standard" %}
{% block content %}

  {# Events Assets #}
  {% includeJsFile '/assets/static/venti-js/grapnel.js' %}
  {% includeJsFile '/assets/static/venti-js/venti.min.js' %}

  {% set Title = 'Events' %}
  {% include '_components/headers' with {'type': 'page-header--standard'} %}
  
  {# Container #}
  <div class="simple-container">

    <div class="lg:flex lg:flex-wrap mb-lg md:-mx-4">

      {# Main #}
      <section class="main-content lg:w-2/3 md:px-4 ">
      </section>

      {# Aside #}
      <aside class="aside-content w-full lg:w-1/3 mt-14 lg:mt-lg md:px-4 clearfix ">
        <div class="max-w-sm lg:max-w-xs w-full m-auto lg:float-right border-b border-grey-lightest pb-6">
          {# Get the url params for month & year #}
          {% set currentMonth = "now"|date('n') %}
          {% set currentYear = "now"|date('Y') %}
          {# Set the current Year - Month #}
          {% set current = currentYear  ~ "-" ~ currentMonth ~ "-1" %}
          {# Set previous and next months #}
          {% set prevMonth = current|date_modify("last day of last month 23:59:00")|date('c') %}
          {% set nextMonth = current|date_modify("first day of next month 00:00:00")|date('c') %}
          {#  Get Events for month between prevMonth & nextMonth #}
          {% set events = craft.venti.events().between(prevMonth,nextMonth|date_modify('last day of last month')|date('c')) %}
          <div id="events-calendar" class="tabs_content" style="display:block;" >
            {% include 'events/components/_eventsNav' with { prev:prevMonth, next:nextMonth, current:current, ids:[] } only %}
            {% include 'events/components/_calendar' with { events:events, month:currentMonth, year:currentYear } only %}
          </div>
        </div>
      </aside>

    </div>

  </div>



  {#
  Stuff to hide for now â€”
  Need to extract and reassemble this stuff
  #}
  <div class="hidden">
    {# Tabs #}
    <div class="tabs-wrap">
      <div class="tabs_tabs">
        <a href="#events-calendar" class="tabs_tab is-active">Month</a>
        <a href="#events-list" class="tabs_tab">List</a>
      </div>
    </div>
    {# Filter #}
    {% include 'events/components/_filter' %}
    {# Groups #}
    {% include 'events/components/_modal-calendar-groups' %}
    {# List #}
    <div id="events-list" class="tabs_content" >
      {% include 'events/components/_eventsNav' with { prev:prevMonth, next:nextMonth, current:current, ids:[] } only %}
      <div class="container container-10 pad-x-0">
        {% include 'events/components/_timeline' with { events:events, month:currentMonth, year:currentYear } only %}
      </div>
    </div>
  </div>
  {# {% includeCssFile '/assets/static/venti-css/venti.css' %} #}
  {# {% includeJsFile 'https://cdn.polyfill.io/v2/polyfill.js?features=default,es6,fetch&flags=gated' %} #}
  {# {% includeJsFile '/assets/static/venti-js/remodal.js' %} #}
{% endblock %}