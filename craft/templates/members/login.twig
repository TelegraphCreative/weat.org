{% extends "_layouts/standard" %}
{% block content %}

{# Container #}
<div class="simple-container">

	{% set message = craft.session.getFlash('notice') %}
	{{ message }}

	{# Form #}
	<section class="form-container --narrow m-auto md:w-3/4 lg:w-1/2 mb-12 sm:mb-lg ">
    Enter your email and password to log in to WEAT.
    {% if craft.session.returnUrl|lower|indexOf('members/subscribe') > -1 %}
    Thanks for wanting to join WEAT. To begin visit either login below or setup a new account.
    {% endif %}
    <form method="post" accept-charset="UTF-8">
      {{ getCsrfInput() }}
      <input type="hidden" name="action" value="users/login">

      {# Field #}
      <div class="form-row mb-6">
        {{ forms.text({
            name: 'loginName',
            id: 'loginName',
            placeholder: 'Email',
            value: (craft.session.rememberedUsername),
            class: "input-field block w-full"
        }) }}
        {% include "_macros/forms/errorList" with { errors: (account is defined ? account.getErrors('loginName')) } %}
      </div>

      {# Field #}
      <div class="form-row mb-6">
        {{ forms.password({
            name: 'password',
            id: 'password',
            placeholder: 'Password',
            class: "input-field block w-full"
        }) }}

        <p><a href="{{ url('members/forgotpassword') }}">Forgot?</a></p>
        {% include "_macros/forms/errorList" with { errors: (account is defined ? account.getErrors('loginName')) } %}
      </div>

      {# Field #}
      <div class="form-row mb-6">
        <label>
            <input type="checkbox" name="rememberMe" value="1">
            Remember me
        </label>
      </div>

      {# Buttons #}
      <div class="form-row mb-6 pt-6 flex items-center">
           <input class="submit btn" type="submit" value="Login">
      </div>

      {% if errorMessage is defined %}
          <p>{{ errorMessage }}</p>
      {% endif %}
    </form>

    <p>Don't have an account? <a href="{{ url('members/register') }}">Join now</a></p>
  </section>
</div>
{% endblock %}
